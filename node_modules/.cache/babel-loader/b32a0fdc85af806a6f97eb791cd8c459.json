{"ast":null,"code":"var _jsxFileName = \"/home/mariana/Documentos/projeto/sd-010-b-project-trivia-react-redux/src/Components/Controller.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\nimport { actionFetchGameData, pauseTime, actionStart, actionResetGameData } from '../actions';\nimport Questions from './Questions';\nimport Loading from './Loading';\n\nclass Controller extends Component {\n  constructor(props) {\n    super(props);\n    this.handleNextQuestion = this.handleNextQuestion.bind(this);\n    this.state = {\n      count: 0,\n      redirect: false\n    };\n  }\n\n  componentDidMount() {\n    const _this$props = this.props,\n          fetchGameData = _this$props.fetchGameData,\n          token = _this$props.token;\n    fetchGameData(token);\n  }\n\n  handleLocalStora() {\n    const _this$props2 = this.props,\n          name = _this$props2.name,\n          gravatar = _this$props2.gravatar,\n          score = _this$props2.score;\n    const newPlayer = {\n      name,\n      score,\n      picture: gravatar\n    };\n    const playerData = localStorage.getItem('ranking');\n\n    if (playerData) {\n      let playerArr = JSON.parse(playerData);\n      playerArr = [...playerArr, newPlayer];\n      localStorage.setItem('ranking', JSON.stringify(playerArr));\n    } else {\n      const playerArr = [newPlayer];\n      localStorage.setItem('ranking', JSON.stringify(playerArr));\n    }\n  }\n\n  handleNextQuestion() {\n    const _this$props3 = this.props,\n          start = _this$props3.start,\n          resetGame = _this$props3.resetGame;\n    const count = this.state.count;\n    const NUMBER = 4;\n\n    if (count === NUMBER) {\n      resetGame();\n      this.handleLocalStora();\n      this.setState({\n        redirect: true\n      });\n    }\n\n    this.setState(prev => ({\n      count: prev.count + 1\n    }));\n    start();\n  }\n\n  render() {\n    const _this$props4 = this.props,\n          gameData = _this$props4.gameData,\n          currentTime = _this$props4.currentTime,\n          isTimerPaused = _this$props4.isTimerPaused;\n    const _this$state = this.state,\n          count = _this$state.count,\n          startTime = _this$state.startTime,\n          redirect = _this$state.redirect;\n    if (redirect) return React.createElement(Redirect, {\n      to: \"/feedback\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, !gameData.length ? React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null, React.createElement(Questions, {\n      questionData: gameData[count],\n      startTime: startTime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })), (currentTime === 0 || isTimerPaused) && React.createElement(\"button\", {\n      onClick: this.handleNextQuestion,\n      type: \"button\",\n      \"data-testid\": \"btn-next\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Next\"));\n  }\n\n}\n\nController.propTypes = {\n  fetchGameData: PropTypes.func.isRequired,\n  gameData: PropTypes.arrayOf(PropTypes.object).isRequired,\n  token: PropTypes.string.isRequired,\n  isTimerPaused: PropTypes.bool.isRequired,\n  currentTime: PropTypes.number.isRequired,\n  start: PropTypes.func.isRequired,\n  resetGame: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  score: PropTypes.number.isRequired,\n  gravatar: PropTypes.string.isRequired\n};\n\nconst mapStateToProps = state => ({\n  gameData: state.game.gameData,\n  token: state.user.token,\n  isTimerPaused: state.time.isTimerPaused,\n  currentTime: state.time.currentTime,\n  name: state.user.name,\n  score: state.user.score,\n  gravatar: state.user.gravatar\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchGameData: token => dispatch(actionFetchGameData(token)),\n  stopTimer: () => dispatch(pauseTime()),\n  start: () => dispatch(actionStart()),\n  resetGame: () => dispatch(actionResetGameData())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controller);","map":{"version":3,"sources":["/home/mariana/Documentos/projeto/sd-010-b-project-trivia-react-redux/src/Components/Controller.jsx"],"names":["React","Component","connect","PropTypes","Redirect","actionFetchGameData","pauseTime","actionStart","actionResetGameData","Questions","Loading","Controller","constructor","props","handleNextQuestion","bind","state","count","redirect","componentDidMount","fetchGameData","token","handleLocalStora","name","gravatar","score","newPlayer","picture","playerData","localStorage","getItem","playerArr","JSON","parse","setItem","stringify","start","resetGame","NUMBER","setState","prev","render","gameData","currentTime","isTimerPaused","startTime","length","propTypes","func","isRequired","arrayOf","object","string","bool","number","mapStateToProps","game","user","time","mapDispatchToProps","dispatch","stopTimer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\nimport { actionFetchGameData,\n  pauseTime,\n  actionStart,\n  actionResetGameData } from '../actions';\nimport Questions from './Questions';\nimport Loading from './Loading';\n\nclass Controller extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleNextQuestion = this.handleNextQuestion.bind(this);\n\n    this.state = {\n      count: 0,\n      redirect: false,\n    };\n  }\n\n  componentDidMount() {\n    const { fetchGameData, token } = this.props;\n    fetchGameData(token);\n  }\n\n  handleLocalStora() {\n    const { name, gravatar, score } = this.props;\n    const newPlayer = { name, score, picture: gravatar };\n    const playerData = localStorage.getItem('ranking');\n\n    if (playerData) {\n      let playerArr = JSON.parse(playerData);\n      playerArr = [...playerArr, newPlayer];\n      localStorage.setItem('ranking', JSON.stringify(playerArr));\n    } else {\n      const playerArr = [newPlayer];\n      localStorage.setItem('ranking', JSON.stringify(playerArr));\n    }\n  }\n\n  handleNextQuestion() {\n    const { start, resetGame } = this.props;\n    const { count } = this.state;\n    const NUMBER = 4;\n\n    if (count === NUMBER) {\n      resetGame();\n      this.handleLocalStora();\n      this.setState({ redirect: true });\n    }\n\n    this.setState((prev) => ({\n      count: prev.count + 1,\n    }));\n\n    start();\n  }\n\n  render() {\n    const { gameData, currentTime, isTimerPaused } = this.props;\n    const { count, startTime, redirect } = this.state;\n    if (redirect) return <Redirect to=\"/feedback\" />;\n\n    return (\n      <div>\n        {!gameData.length ? (\n          <Loading />\n        ) : (\n          <>\n            {/* <Timer count={ count } /> */}\n            <Questions questionData={ gameData[count] } startTime={ startTime } />\n          </>\n        )}\n        {(currentTime === 0 || isTimerPaused) && (\n          <button\n            onClick={ this.handleNextQuestion }\n            type=\"button\"\n            data-testid=\"btn-next\"\n          >\n            Next\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n\nController.propTypes = {\n  fetchGameData: PropTypes.func.isRequired,\n  gameData: PropTypes.arrayOf(PropTypes.object).isRequired,\n  token: PropTypes.string.isRequired,\n  isTimerPaused: PropTypes.bool.isRequired,\n  currentTime: PropTypes.number.isRequired,\n  start: PropTypes.func.isRequired,\n  resetGame: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  score: PropTypes.number.isRequired,\n  gravatar: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  gameData: state.game.gameData,\n  token: state.user.token,\n  isTimerPaused: state.time.isTimerPaused,\n  currentTime: state.time.currentTime,\n  name: state.user.name,\n  score: state.user.score,\n  gravatar: state.user.gravatar,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  fetchGameData: (token) => dispatch(actionFetchGameData(token)),\n  stopTimer: () => dispatch(pauseTime()),\n  start: () => dispatch(actionStart()),\n  resetGame: () => dispatch(actionResetGameData()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controller);\n"]},"metadata":{},"sourceType":"module"}