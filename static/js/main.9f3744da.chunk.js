(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{111:function(e,t,a){e.exports=a(217)},116:function(e,t,a){},121:function(e,t,a){},123:function(e,t,a){},130:function(e,t){},132:function(e,t){},165:function(e,t){},166:function(e,t){},172:function(e,t){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),i=a.n(c),s=(a(116),a(9)),o=a(12),u=a(25),l=a(108),m=a(11),d={token:"",name:"",gravatar:"",gravatarEmail:"",score:0,assertions:0},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH_TOKEN":return Object(m.a)({},e,{token:n.token});case"SAVE_USER":return Object(m.a)({},e,{name:n.user.name,gravatarEmail:n.user.gravatarEmail,assertions:n.user.assertions,score:n.user.score,gravatar:"https://www.gravatar.com/avatar/".concat(n.gravatar)});case"SAVE_SCORE":return Object(m.a)({},e,{score:e.score+n.questionScore,assertions:e.assertions+1});default:return e}},h=a(34),b={gameData:[],settings:{category:20,difficult:"",type:""}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GAME_DATA":return Object(m.a)({},e,{gameData:Object(h.a)(t.payload.data)});case"RESET_GAME_DATA":return Object(m.a)({},e,{gameData:[]});case"SET_CONFIGURATION":return Object(m.a)({},e,{settings:t.payload.settings});default:return e}},g={isTimerPaused:!1,currentTime:30,reestart:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAUSE_TIME":return Object(m.a)({},e,{isTimerPaused:!0,reestart:!1});case"SET_TIMER":return Object(m.a)({},e,{currentTime:e.currentTime-1,reestart:!1});case"REESTART_TIME":return Object(m.a)({},e,{reestart:!e.reestart,currentTime:30,isTimerPaused:!1});default:return e}},E=Object(u.c)({user:p,game:f,time:v}),y="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof(arguments.length<=0?void 0:arguments[0])?u.d:u.d.apply(void 0,arguments)},O=Object(u.e)(E,y(Object(u.a)(l.a))),k=a(28),j=(a(121),a(22)),T=a.n(j),S=a(33),N=a(4),C=a(5),_=a(7),w=a(6),x=a(14),I=a(8),D=(a(123),a(109)),P=a.n(D),A=function(){return function(e){return function(){var e,t,a,n;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=r.sent,r.next=5,T.a.awrap(e.json());case 5:return t=r.sent,r.next=8,T.a.awrap(t);case 8:return a=r.sent,n=a.token,r.abrupt("return",n);case 11:case"end":return r.stop()}}))}().then((function(t){localStorage.setItem("token",t),e({type:"FETCH_TOKEN",payload:{token:t}})}))}},R=function(e,t){return function(a){return function(e,t){var a,n,r,c,i;return T.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=t.category,n=t.difficult,r=t.type,s.next=3,T.a.awrap(fetch("https://opentdb.com/api.php?amount=5&category=".concat(a,"&difficulty=").concat(n,"&type=").concat(r,"&token=").concat(e)));case 3:return c=s.sent,s.next=6,T.a.awrap(c.json());case 6:return i=s.sent,s.abrupt("return",i.results);case 8:case"end":return s.stop()}}))}(e,t).then((function(e){return a({type:"FETCH_GAME_DATA",payload:{data:e}})}))}},M=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(_.a)(this,Object(w.a)(t).call(this,e))).state={nome:"",email:"",redirect:!1},a.handleChange=a.handleChange.bind(Object(x.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(x.a)(a)),a}return Object(I.a)(t,e),Object(C.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(S.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t,a,n,r,c,i,s,o;return T.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:e.preventDefault(),t=this.state,a=t.nome,n=t.email,r=this.props,c=r.getToken,i=r.saveUser,c(),s=P()(n).toString(),i((o={player:{name:a,assertions:0,score:0,gravatarEmail:n}}).player,s),localStorage.setItem("state",JSON.stringify(o)),this.setState({redirect:!0});case 9:case"end":return u.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.nome,a=e.email;return e.redirect?r.a.createElement(k.a,{to:"/game"}):r.a.createElement("div",{className:"formContainer"},r.a.createElement(o.b,{className:"btn-ranking",to:"/ranking"},r.a.createElement("img",{className:"ranking-icon",alt:"podium",src:"https://image.flaticon.com/icons/png/512/1277/1277835.png"})),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",{className:"name-triva"},"Mythology Trivia"),r.a.createElement("label",{className:"nome",htmlFor:"input-player-name"},r.a.createElement("input",{name:"nome",value:t,id:"input-player-name",type:"text","data-testid":"input-player-name",onChange:this.handleChange,placeholder:"Name"})),r.a.createElement("label",{htmlFor:"input-gravatar-email"},r.a.createElement("input",{name:"email",value:a,id:"input-gravatar-email",type:"email","data-testid":"input-gravatar-email",onChange:this.handleChange,placeholder:"Email"})),r.a.createElement("button",{className:"btn-play",type:"submit","data-testid":"btn-play",disabled:!t.length||!a.length},"Play")),r.a.createElement(o.b,{className:"btn-settings","data-testid":"btn-settings",to:"/settings"},r.a.createElement("img",{className:"settings-icon",src:"https://img-premium.flaticon.com/png/512/484/premium/484562.png?token=exp=1623959011~hmac=43114dfe0afda660ab124549cc248fc6",alt:"settings"})))}}]),t}(r.a.Component),F=Object(s.b)((function(e){return{token:e.user.token}}),(function(e){return{getToken:function(){return e(A())},saveUser:function(t,a){return e(function(e,t){return{type:"SAVE_USER",payload:{user:e,gravatar:t}}}(t,a))}}}))(M),q=(a(210),a(211),function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gravatar,a=e.name,n=e.score;return r.a.createElement("header",null,r.a.createElement("img",{"data-testid":"header-profile-picture",alt:"user login",src:t}),r.a.createElement("h4",{"data-testid":"header-player-name",className:"player"},"Player:"," ",a),r.a.createElement("h4",{className:"score","data-testid":"header-score"},"Score:"," ",n))}}]),t}(r.a.Component)),U=Object(s.b)((function(e){return{name:e.user.name,gravatar:e.user.gravatar,score:e.user.score}}))(q),G=(a(212),a(213),function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(_.a)(this,Object(w.a)(t).call(this,e))).onClick=a.onClick.bind(Object(x.a)(a)),a.calculateScore=a.calculateScore.bind(Object(x.a)(a)),a.savePlayerInfos=a.savePlayerInfos.bind(Object(x.a)(a)),a.changeText=a.changeText.bind(Object(x.a)(a)),a}return Object(I.a)(t,e),Object(C.a)(t,[{key:"onClick",value:function(e){var t=e.target;(0,this.props.stopTimer)(),"correct-answer"===t.name&&this.calculateScore()}},{key:"calculateScore",value:function(){var e=this.props,t=e.questionData,a=e.currentTime,n=e.saveScore,r=0;switch(t.difficulty){case"hard":r=3;break;case"medium":r=2;break;case"easy":r=1;break;default:r=0}var c=10+a*r;n(c),this.savePlayerInfos(c)}},{key:"savePlayerInfos",value:function(e){var t=JSON.parse(localStorage.getItem("state")),a=t.player,n=a.score,r=a.assertions,c={player:Object(m.a)({},t.player,{score:n+e,assertions:r+1})};localStorage.setItem("state",JSON.stringify(c))}},{key:"changeText",value:function(e){return{__html:e}}},{key:"render",value:function(){var e=this,t=this.props,a=t.questionData,n=t.isTimerPaused,c=t.currentTime,i=a.question,s=[a.correct_answer].concat(Object(h.a)(a.incorrect_answers));return r.a.createElement("div",{className:"question"},r.a.createElement("h3",{className:"question-text","data-testid":"question-text",dangerouslySetInnerHTML:this.changeText(i)}),r.a.createElement("div",{className:"buttons"},s.sort().map((function(t,i){return t===a.correct_answer?r.a.createElement("button",{key:i,type:"button",name:"correct-answer","data-testid":"correct-answer",className:n?"correct-answer":"",onClick:e.onClick,disabled:n||0===c,dangerouslySetInnerHTML:e.changeText(t)}):r.a.createElement("button",{key:i,type:"button",name:"wrong-answer","data-testid":"wrong-answer-".concat(i),className:n?"wrong-answer":"",onClick:e.onClick,disabled:n||0===c},t)}))))}}]),t}(n.Component)),J=Object(s.b)((function(e){return{isTimerPaused:e.time.isTimerPaused,currentTime:e.time.currentTime}}),(function(e){return{stopTimer:function(){return e({type:"PAUSE_TIME"})},saveScore:function(t){return e({type:"SAVE_SCORE",payload:{questionScore:t}})}}}))(G),L=function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Loading..."))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(_.a)(this,Object(w.a)(t).call(this,e))).handleNextQuestion=a.handleNextQuestion.bind(Object(x.a)(a)),a.state={count:0,redirect:!1},a}return Object(I.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchGameData)(e.token,e.settings)}},{key:"handleLocalStora",value:function(){var e=this.props,t=e.name,a=e.gravatar,n={name:t,score:e.score,picture:a},r=localStorage.getItem("ranking");if(r){var c=JSON.parse(r);c=[].concat(Object(h.a)(c),[n]),localStorage.setItem("ranking",JSON.stringify(c))}else{var i=[n];localStorage.setItem("ranking",JSON.stringify(i))}}},{key:"handleNextQuestion",value:function(){var e=this.props,t=e.start,a=e.resetGame;4===this.state.count&&(a(),this.handleLocalStora(),this.setState({redirect:!0})),this.setState((function(e){return{count:e.count+1}})),t()}},{key:"render",value:function(){var e=this.props,t=e.gameData,a=e.currentTime,n=e.isTimerPaused,c=this.state,i=c.count,s=c.startTime;return c.redirect?r.a.createElement(k.a,{to:"/feedback"}):r.a.createElement("div",{className:"controller"},t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{questionData:t[i],startTime:s})):r.a.createElement(L,null),(0===a||n)&&r.a.createElement("button",{className:"btn-next",onClick:this.handleNextQuestion,type:"button","data-testid":"btn-next"},"Next"))}}]),t}(n.Component),V=Object(s.b)((function(e){return{gameData:e.game.gameData,token:e.user.token,isTimerPaused:e.time.isTimerPaused,currentTime:e.time.currentTime,name:e.user.name,score:e.user.score,gravatar:e.user.gravatar,settings:e.game.settings}}),(function(e){return{fetchGameData:function(t,a){return e(R(t,a))},stopTimer:function(){return e({type:"PAUSE_TIME"})},start:function(){return e({type:"REESTART_TIME"})},resetGame:function(){return e({type:"RESET_GAME_DATA"})}}}))(H),Q=function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.handleTimer()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.currentTime,a=e.isTimerPaused,n=e.reestart;(0===t||a)&&clearInterval(this.timer),n&&this.handleTimer()}},{key:"handleTimer",value:function(){var e=this.props.decrementTime;this.timer=setInterval((function(){e()}),1e3)}},{key:"render",value:function(){var e=this.props.currentTime;return r.a.createElement("div",{className:"timer"},"Timer:",e)}}]),t}(n.Component),X=Object(s.b)((function(e){return{currentTime:e.time.currentTime,isTimerPaused:e.time.isTimerPaused,reestart:e.time.reestart}}),(function(e){return{decrementTime:function(){return e({type:"SET_TIMER"})}}}))(Q),B=function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props.gameData;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement("main",null,r.a.createElement("div",{className:"box-question"},e.length?r.a.createElement(X,null):null,r.a.createElement(V,null))))}}]),t}(r.a.Component),K=Object(s.b)((function(e){return{gameData:e.game.gameData}}),null)(B),W=(a(214),{category:20,difficult:"",type:""}),$=[{id:0,name:"random",value:""},{id:1,name:"easy",value:"easy"},{id:2,name:"medium",value:"medium"},{id:3,name:"hard",value:"hard"}],z=[{id:0,name:"random",value:""},{id:1,name:"boolean",value:"boolean"},{id:2,name:"multiple",value:"multiple"}],Y=function(e){function t(){var e;return Object(N.a)(this,t),(e=Object(_.a)(this,Object(w.a)(t).call(this))).state=Object(m.a)({},W),e.handleChange=e.handleChange.bind(Object(x.a)(e)),e}return Object(I.a)(t,e),Object(C.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(S.a)({},a,n))}},{key:"render",value:function(){var e=this,t=this.props.saveSettings;return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"box-settings"},r.a.createElement("h1",{"data-testid":"settings-title"},"Settings"),r.a.createElement("div",{className:"options"},r.a.createElement("div",{className:"box-intern"},r.a.createElement("label",{htmlFor:"difficult"},"Difficult:",r.a.createElement("select",{name:"difficult",onChange:this.handleChange},$.map((function(e){return r.a.createElement("option",{key:e.id,value:e.value},e.name)}))))),r.a.createElement("div",{className:"box-intern"},r.a.createElement("label",{htmlFor:"type"},"Type:",r.a.createElement("select",{name:"type",onChange:this.handleChange},z.map((function(e){return r.a.createElement("option",{key:e.id,value:e.value},e.name)}))))),r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{className:"btn-save-settings",type:"button",onClick:function(){t(e.state)}},"Save Settings")))))}}]),t}(n.Component),Z=Object(s.b)(null,(function(e){return{saveSettings:function(t){return e(function(e){return{type:"SET_CONFIGURATION",payload:{settings:e}}}(t))}}}))(Y),ee=(a(215),function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"feedback"},r.a.createElement(U,null),r.a.createElement("div",{className:"box-feedback"},r.a.createElement("h1",{"data-testid":"feedback-text"},"Feedback"),t>=3?r.a.createElement("h2",{"data-testid":"feedback-text"},"Mandou bem!"):r.a.createElement("h2",{"data-testid":"feedback-text"},"Podia ser melhor..."),r.a.createElement("h2",{"data-testid":"feedback-total-score"},"Score:"," ",a),r.a.createElement("h2",{"data-testid":"feedback-total-question"},"Assertions:"," ",t),r.a.createElement("div",{className:"feedback-btn-box"},r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{className:"btn-feedback",type:"button","data-testid":"btn-play-again"},"Play Again")),r.a.createElement(o.b,{to:"/ranking"},r.a.createElement("button",{className:"btn-feedback",type:"button","data-testid":"btn-ranking"},"Ranking")))))}}]),t}(n.Component)),te=Object(s.b)((function(e){return{assertions:e.user.assertions,score:e.user.score}}),null)(ee),ae=(a(216),function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(_.a)(this,Object(w.a)(t).call(this,e))).state={arrRankingPlayers:[]},a}return Object(I.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.handleRanking()}},{key:"handleRanking",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));e&&(e.sort((function(e,t){return t.score-e.score})),this.setState({arrRankingPlayers:e}))}},{key:"render",value:function(){var e=this.state.arrRankingPlayers;return r.a.createElement("div",{className:"ranking"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),e.slice(0,3).map((function(e,t){return r.a.createElement("div",{className:"position-ranking ranking-".concat(t+1),key:t},r.a.createElement("img",{src:e.picture,alt:e.picture}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement(o.b,{className:"btn-back","data-testid":"btn-go-home",to:"/"},"Back"))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,null,r.a.createElement(s.a,{store:O},r.a.createElement((function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k.d,null,r.a.createElement(k.b,{exact:!0,path:"/",component:F}),r.a.createElement(k.b,{exact:!0,path:"/game",component:K}),r.a.createElement(k.b,{exact:!0,path:"/settings",component:Z}),r.a.createElement(k.b,{exact:!0,path:"/feedback",component:te}),r.a.createElement(k.b,{exact:!0,path:"/ranking",component:ae})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[111,1,2]]]);
//# sourceMappingURL=main.9f3744da.chunk.js.map